{
  "kind": "build_request",
  "title": "Fix admin authentication validation for product creation",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-94",
      "text": "Update the backend addProduct method in main.mo to remove or bypass the permission check that is incorrectly rejecting authenticated admin users who are logged in through the AdminAuthProvider with the correct passcode (09131991)",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "still saying failed to add product",
          "single item with one image and all the required feilds filled out"
        ]
      },
      "acceptanceCriteria": [
        "Authenticated admin users can successfully add products with all required fields filled out",
        "The addProduct method accepts product creation requests from users authenticated via AdminAuthProvider",
        "No permission or authorization errors are thrown when admin users attempt to add products"
      ]
    },
    {
      "id": "REQ-95",
      "text": "Add detailed error logging to the backend addProduct method that captures and logs the exact authentication state, caller principal, and permission validation results when product creation attempts fail",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "failed to add product"
        ]
      },
      "acceptanceCriteria": [
        "Backend logs show caller principal when addProduct is invoked",
        "Backend logs show admin authentication check results",
        "Backend logs indicate which specific permission validation failed if applicable"
      ]
    },
    {
      "id": "REQ-96",
      "text": "Update the useProducts hook addProduct mutation in the frontend to log detailed error information including the full error response from the backend when product creation fails",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "still saying failed to add product"
        ]
      },
      "acceptanceCriteria": [
        "Console logs show the complete error object returned from backend when addProduct fails",
        "Error messages from backend are displayed to the user instead of generic 'failed to add product' message",
        "Users can see specific validation failures or permission errors in the UI"
      ]
    }
  ],
  "constraints": [
    "Maintain single-actor backend architecture in main.mo",
    "Preserve existing admin authentication flow via AdminAuthProvider with passcode 09131991",
    "Do not modify Internet Identity authentication system",
    "Keep all existing product data models and variant support intact"
  ],
  "nonGoals": [
    "Changing the admin passcode",
    "Modifying the AdminAuthProvider context implementation",
    "Altering the Internet Identity login flow",
    "Redesigning the ProductForm UI component"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}